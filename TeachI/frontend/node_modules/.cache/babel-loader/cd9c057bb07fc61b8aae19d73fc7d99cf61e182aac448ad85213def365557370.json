{"ast":null,"code":"import{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import{useAuth}from'../../context/AuthContext';import axios from'axios';import{BookOpenIcon,UserIcon,CalendarIcon,CurrencyDollarIcon,ClockIcon,DocumentIcon,PencilIcon,TrashIcon,CheckCircleIcon}from'@heroicons/react/24/outline';import LoadingSpinner from'../Common/LoadingSpinner';import CourseContentViewer from'./CourseContentViewer';import toast from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const CourseDetail=()=>{var _course$prerequisites;const{id}=useParams();const{user}=useAuth();const navigate=useNavigate();const[course,setCourse]=useState(null);const[loading,setLoading]=useState(true);const[isEnrolled,setIsEnrolled]=useState(false);const[enrollmentLoading,setEnrollmentLoading]=useState(false);useEffect(()=>{fetchCourseDetails();if((user===null||user===void 0?void 0:user.role)==='student'){checkEnrollmentStatus();}},[id,user]);const fetchCourseDetails=async()=>{try{const response=await axios.get(\"/api/courses/\".concat(id));setCourse(response.data);}catch(error){console.error('Error fetching course:',error);toast.error('Course not found');navigate('/courses');}finally{setLoading(false);}};const checkEnrollmentStatus=async()=>{try{const response=await axios.get(\"/api/enrollments/student/\".concat(user._id));const enrolled=response.data.some(enrollment=>enrollment.course._id===id&&enrollment.status==='enrolled');setIsEnrolled(enrolled);}catch(error){console.error('Error checking enrollment:',error);}};const handleEnroll=async()=>{try{setEnrollmentLoading(true);console.log('Enrolling in course:',id);// Debug log\nconst response=await axios.post('/api/enrollments',{courseId:id});console.log('Enrollment response:',response.data);// Debug log\nsetIsEnrolled(true);toast.success('Successfully enrolled in course!');fetchCourseDetails();// Refresh to update enrollment count\n}catch(error){var _error$response,_error$response$data;console.error('Enrollment error:',error);// Debug log\nconst message=((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Failed to enroll';toast.error(message);}finally{setEnrollmentLoading(false);}};const handleUnenroll=async()=>{try{// Find enrollment ID and delete\nconst enrollments=await axios.get(\"/api/enrollments/student/\".concat(user._id));const enrollment=enrollments.data.find(e=>e.course._id===id);if(enrollment){await axios.delete(\"/api/enrollments/\".concat(enrollment._id));setIsEnrolled(false);toast.success('Successfully unenrolled from course');fetchCourseDetails();}}catch(error){toast.error('Failed to unenroll from course');}};const handleApproveCourse=async()=>{try{await axios.put(\"/api/courses/\".concat(id,\"/approve\"));toast.success('Course approved successfully!');fetchCourseDetails();// Refresh course data\n}catch(error){toast.error('Failed to approve course');}};if(loading){return/*#__PURE__*/_jsx(LoadingSpinner,{});}if(!course){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-12\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900\",children:\"Course not found\"})});}const canEdit=(user===null||user===void 0?void 0:user.role)==='instructor'&&course.instructor._id===user._id;// Removed admin from edit permissions\nconst canApprove=(user===null||user===void 0?void 0:user.role)==='admin';// Separate permission for approval\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-4xl mx-auto space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col lg:flex-row lg:items-start lg:justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4 mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-16 w-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center\",children:/*#__PURE__*/_jsx(BookOpenIcon,{className:\"h-8 w-8 text-white\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:course.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg text-gray-600\",children:course.courseCode})]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700 mb-6\",children:course.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-gray-600\",children:[/*#__PURE__*/_jsx(UserIcon,{className:\"h-5 w-5 mr-3\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Instructor: \",course.instructor.firstName,\" \",course.instructor.lastName]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-gray-600\",children:[/*#__PURE__*/_jsx(CalendarIcon,{className:\"h-5 w-5 mr-3\"}),/*#__PURE__*/_jsxs(\"span\",{children:[course.credits,\" Credits \\u2022 \",course.level]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-gray-600\",children:[/*#__PURE__*/_jsx(CurrencyDollarIcon,{className:\"h-5 w-5 mr-3\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",course.fees]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-gray-600\",children:[/*#__PURE__*/_jsx(ClockIcon,{className:\"h-5 w-5 mr-3\"}),/*#__PURE__*/_jsxs(\"span\",{children:[course.currentEnrollment,\"/\",course.maxStudents,\" enrolled\"]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 lg:mt-0 lg:ml-6 flex flex-col space-y-3\",children:[canEdit&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate(\"/courses/\".concat(id,\"/edit\")),className:\"btn btn-secondary flex items-center justify-center\",children:[/*#__PURE__*/_jsx(PencilIcon,{className:\"h-5 w-5 mr-2\"}),\"Edit Course\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate(\"/courses/\".concat(id,\"/materials\")),className:\"btn btn-primary flex items-center justify-center\",children:[/*#__PURE__*/_jsx(DocumentIcon,{className:\"h-5 w-5 mr-2\"}),\"Manage Materials\"]})]}),canApprove&&!course.isApproved&&/*#__PURE__*/_jsxs(\"button\",{onClick:handleApproveCourse,className:\"btn btn-primary flex items-center justify-center\",children:[/*#__PURE__*/_jsx(CheckCircleIcon,{className:\"h-5 w-5 mr-2\"}),\"Approve Course\"]}),canApprove&&/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-danger flex items-center justify-center\",children:[/*#__PURE__*/_jsx(TrashIcon,{className:\"h-5 w-5 mr-2\"}),\"Deactivate Course\"]}),(user===null||user===void 0?void 0:user.role)==='student'&&/*#__PURE__*/_jsx(_Fragment,{children:!isEnrolled?/*#__PURE__*/_jsx(\"button\",{onClick:handleEnroll,disabled:enrollmentLoading||course.currentEnrollment>=course.maxStudents||!course.isApproved,className:\"btn btn-primary disabled:opacity-50\",children:enrollmentLoading?'Enrolling...':!course.isApproved?'Pending Approval':course.currentEnrollment>=course.maxStudents?'Course Full':'Enroll Now'}):/*#__PURE__*/_jsx(\"button\",{onClick:handleUnenroll,className:\"btn btn-danger\",children:\"Unenroll\"})})]})]})}),/*#__PURE__*/_jsx(CourseContentViewer,{materials:course.materials||[],isEnrolled:isEnrolled,canEdit:canEdit,onEnroll:handleEnroll,enrollmentLoading:enrollmentLoading}),((_course$prerequisites=course.prerequisites)===null||_course$prerequisites===void 0?void 0:_course$prerequisites.length)>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900 mb-4\",children:\"Prerequisites\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"list-disc list-inside space-y-1\",children:course.prerequisites.map((prereq,index)=>/*#__PURE__*/_jsx(\"li\",{className:\"text-gray-700\",children:prereq},index))})]})]});};export default CourseDetail;","map":{"version":3,"names":["useState","useEffect","useParams","useNavigate","useAuth","axios","BookOpenIcon","UserIcon","CalendarIcon","CurrencyDollarIcon","ClockIcon","DocumentIcon","PencilIcon","TrashIcon","CheckCircleIcon","LoadingSpinner","CourseContentViewer","toast","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CourseDetail","_course$prerequisites","id","user","navigate","course","setCourse","loading","setLoading","isEnrolled","setIsEnrolled","enrollmentLoading","setEnrollmentLoading","fetchCourseDetails","role","checkEnrollmentStatus","response","get","concat","data","error","console","_id","enrolled","some","enrollment","status","handleEnroll","log","post","courseId","success","_error$response","_error$response$data","message","handleUnenroll","enrollments","find","e","delete","handleApproveCourse","put","className","children","canEdit","instructor","canApprove","title","courseCode","description","firstName","lastName","credits","level","fees","currentEnrollment","maxStudents","onClick","isApproved","disabled","materials","onEnroll","prerequisites","length","map","prereq","index"],"sources":["C:/Users/Alikhan/Desktop/TeachI MVP/TeachI/frontend/src/components/Courses/CourseDetail.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useAuth } from '../../context/AuthContext';\nimport axios from 'axios';\nimport {\n  BookOpenIcon,\n  UserIcon,\n  CalendarIcon,\n  CurrencyDollarIcon,\n  ClockIcon,\n  DocumentIcon,\n  PencilIcon,\n  TrashIcon,\n  CheckCircleIcon\n} from '@heroicons/react/24/outline';\nimport LoadingSpinner from '../Common/LoadingSpinner';\nimport CourseContentViewer from './CourseContentViewer';\nimport toast from 'react-hot-toast';\n\nconst CourseDetail = () => {\n  const { id } = useParams();\n  const { user } = useAuth();\n  const navigate = useNavigate();\n  const [course, setCourse] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [isEnrolled, setIsEnrolled] = useState(false);\n  const [enrollmentLoading, setEnrollmentLoading] = useState(false);\n\n  useEffect(() => {\n    fetchCourseDetails();\n    if (user?.role === 'student') {\n      checkEnrollmentStatus();\n    }\n  }, [id, user]);\n\n  const fetchCourseDetails = async () => {\n    try {\n      const response = await axios.get(`/api/courses/${id}`);\n      setCourse(response.data);\n    } catch (error) {\n      console.error('Error fetching course:', error);\n      toast.error('Course not found');\n      navigate('/courses');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const checkEnrollmentStatus = async () => {\n    try {\n      const response = await axios.get(`/api/enrollments/student/${user._id}`);\n      const enrolled = response.data.some(enrollment =>\n        enrollment.course._id === id && enrollment.status === 'enrolled'\n      );\n      setIsEnrolled(enrolled);\n    } catch (error) {\n      console.error('Error checking enrollment:', error);\n    }\n  };\n\n  const handleEnroll = async () => {\n    try {\n      setEnrollmentLoading(true);\n      console.log('Enrolling in course:', id); // Debug log\n      const response = await axios.post('/api/enrollments', { courseId: id });\n      console.log('Enrollment response:', response.data); // Debug log\n      setIsEnrolled(true);\n      toast.success('Successfully enrolled in course!');\n      fetchCourseDetails(); // Refresh to update enrollment count\n    } catch (error) {\n      console.error('Enrollment error:', error); // Debug log\n      const message = error.response?.data?.message || 'Failed to enroll';\n      toast.error(message);\n    } finally {\n      setEnrollmentLoading(false);\n    }\n  };\n\n  const handleUnenroll = async () => {\n    try {\n      // Find enrollment ID and delete\n      const enrollments = await axios.get(`/api/enrollments/student/${user._id}`);\n      const enrollment = enrollments.data.find(e => e.course._id === id);\n\n      if (enrollment) {\n        await axios.delete(`/api/enrollments/${enrollment._id}`);\n        setIsEnrolled(false);\n        toast.success('Successfully unenrolled from course');\n        fetchCourseDetails();\n      }\n    } catch (error) {\n      toast.error('Failed to unenroll from course');\n    }\n  };\n\n  const handleApproveCourse = async () => {\n    try {\n      await axios.put(`/api/courses/${id}/approve`);\n      toast.success('Course approved successfully!');\n      fetchCourseDetails(); // Refresh course data\n    } catch (error) {\n      toast.error('Failed to approve course');\n    }\n  };\n\n  if (loading) {\n    return <LoadingSpinner />;\n  }\n\n  if (!course) {\n    return (\n      <div className=\"text-center py-12\">\n        <h2 className=\"text-2xl font-bold text-gray-900\">Course not found</h2>\n      </div>\n    );\n  }\n\n  const canEdit = user?.role === 'instructor' && course.instructor._id === user._id; // Removed admin from edit permissions\n  const canApprove = user?.role === 'admin'; // Separate permission for approval\n\n  return (\n    <div className=\"max-w-4xl mx-auto space-y-6\">\n      {/* Course Header */}\n      <div className=\"card\">\n        <div className=\"flex flex-col lg:flex-row lg:items-start lg:justify-between\">\n          <div className=\"flex-1\">\n            <div className=\"flex items-center space-x-4 mb-4\">\n              <div className=\"h-16 w-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center\">\n                <BookOpenIcon className=\"h-8 w-8 text-white\" />\n              </div>\n              <div>\n                <h1 className=\"text-2xl font-bold text-gray-900\">{course.title}</h1>\n                <p className=\"text-lg text-gray-600\">{course.courseCode}</p>\n              </div>\n            </div>\n\n            <p className=\"text-gray-700 mb-6\">{course.description}</p>\n\n            {/* Course Info Grid */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6\">\n              <div className=\"flex items-center text-gray-600\">\n                <UserIcon className=\"h-5 w-5 mr-3\" />\n                <span>Instructor: {course.instructor.firstName} {course.instructor.lastName}</span>\n              </div>\n\n              <div className=\"flex items-center text-gray-600\">\n                <CalendarIcon className=\"h-5 w-5 mr-3\" />\n                <span>{course.credits} Credits â€¢ {course.level}</span>\n              </div>\n\n              <div className=\"flex items-center text-gray-600\">\n                <CurrencyDollarIcon className=\"h-5 w-5 mr-3\" />\n                <span>${course.fees}</span>\n              </div>\n\n              <div className=\"flex items-center text-gray-600\">\n                <ClockIcon className=\"h-5 w-5 mr-3\" />\n                <span>{course.currentEnrollment}/{course.maxStudents} enrolled</span>\n              </div>\n            </div>\n          </div>\n\n          {/* Action Buttons */}\n          <div className=\"mt-6 lg:mt-0 lg:ml-6 flex flex-col space-y-3\">\n            {canEdit && (\n              <>\n                <button\n                  onClick={() => navigate(`/courses/${id}/edit`)}\n                  className=\"btn btn-secondary flex items-center justify-center\"\n                >\n                  <PencilIcon className=\"h-5 w-5 mr-2\" />\n                  Edit Course\n                </button>\n                <button\n                  onClick={() => navigate(`/courses/${id}/materials`)}\n                  className=\"btn btn-primary flex items-center justify-center\"\n                >\n                  <DocumentIcon className=\"h-5 w-5 mr-2\" />\n                  Manage Materials\n                </button>\n              </>\n            )}\n\n            {canApprove && !course.isApproved && (\n              <button\n                onClick={handleApproveCourse}\n                className=\"btn btn-primary flex items-center justify-center\"\n              >\n                <CheckCircleIcon className=\"h-5 w-5 mr-2\" />\n                Approve Course\n              </button>\n            )}\n\n            {canApprove && (\n              <button\n                className=\"btn btn-danger flex items-center justify-center\"\n              >\n                <TrashIcon className=\"h-5 w-5 mr-2\" />\n                Deactivate Course\n              </button>\n            )}\n\n            {user?.role === 'student' && (\n              <>\n                {!isEnrolled ? (\n                  <button\n                    onClick={handleEnroll}\n                    disabled={enrollmentLoading || course.currentEnrollment >= course.maxStudents || !course.isApproved}\n                    className=\"btn btn-primary disabled:opacity-50\"\n                  >\n                    {enrollmentLoading ? 'Enrolling...' :\n                      !course.isApproved ? 'Pending Approval' :\n                        course.currentEnrollment >= course.maxStudents ? 'Course Full' : 'Enroll Now'}\n                  </button>\n                ) : (\n                  <button\n                    onClick={handleUnenroll}\n                    className=\"btn btn-danger\"\n                  >\n                    Unenroll\n                  </button>\n                )}\n              </>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* Course Materials - Now visible to all users */}\n      <CourseContentViewer\n        materials={course.materials || []}\n        isEnrolled={isEnrolled}\n        canEdit={canEdit}\n        onEnroll={handleEnroll}\n        enrollmentLoading={enrollmentLoading}\n      />\n\n      {/* Prerequisites */}\n      {course.prerequisites?.length > 0 && (\n        <div className=\"card\">\n          <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">Prerequisites</h2>\n          <ul className=\"list-disc list-inside space-y-1\">\n            {course.prerequisites.map((prereq, index) => (\n              <li key={index} className=\"text-gray-700\">{prereq}</li>\n            ))}\n          </ul>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default CourseDetail;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}