{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Alikhan\\\\Desktop\\\\TeachI MVP\\\\TeachI\\\\frontend\\\\src\\\\components\\\\Auth\\\\DocumentUpload.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { CloudArrowUpIcon, DocumentIcon, CheckCircleIcon, ClockIcon, XCircleIcon } from '@heroicons/react/24/outline';\nimport toast from 'react-hot-toast';\nimport { useAuth } from '../../context/AuthContext';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst DocumentUpload = () => {\n  _s();\n  var _user$instructorProfi3;\n  const navigate = useNavigate();\n  const {\n    user,\n    refreshUser\n  } = useAuth();\n  const [uploading, setUploading] = useState(false);\n  const [isSubmitted, setIsSubmitted] = useState(false);\n  const [documents, setDocuments] = useState([{\n    type: 'degree_certificate',\n    file: null,\n    required: true,\n    label: 'Degree Certificate'\n  }, {\n    type: 'teaching_certificate',\n    file: null,\n    required: false,\n    label: 'Teaching Certificate'\n  }, {\n    type: 'id_proof',\n    file: null,\n    required: true,\n    label: 'ID Proof'\n  }, {\n    type: 'experience_letter',\n    file: null,\n    required: false,\n    label: 'Experience Letter'\n  }]);\n\n  // Show toast notification for document status changes\n  useEffect(() => {\n    var _user$instructorProfi, _user$instructorProfi2;\n    if ((user === null || user === void 0 ? void 0 : (_user$instructorProfi = user.instructorProfile) === null || _user$instructorProfi === void 0 ? void 0 : _user$instructorProfi.verificationStatus) === 'rejected' && !isSubmitted) {\n      toast.error('Your documents were rejected. Please upload new documents for verification.');\n    } else if ((user === null || user === void 0 ? void 0 : (_user$instructorProfi2 = user.instructorProfile) === null || _user$instructorProfi2 === void 0 ? void 0 : _user$instructorProfi2.verificationStatus) === 'approved') {\n      toast.success('Your documents have been approved! Your instructor account is now active.');\n    }\n  }, [user === null || user === void 0 ? void 0 : (_user$instructorProfi3 = user.instructorProfile) === null || _user$instructorProfi3 === void 0 ? void 0 : _user$instructorProfi3.verificationStatus, isSubmitted]);\n  const handleFileChange = (index, file) => {\n    const updatedDocuments = [...documents];\n    updatedDocuments[index].file = file;\n    setDocuments(updatedDocuments);\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    // Check required documents\n    const requiredDocs = documents.filter(doc => doc.required && !doc.file);\n    if (requiredDocs.length > 0) {\n      toast.error('Please upload all required documents');\n      return;\n    }\n    setUploading(true);\n    try {\n      const formData = new FormData();\n      const documentTypes = [];\n      documents.forEach(doc => {\n        if (doc.file) {\n          formData.append('documents', doc.file);\n          documentTypes.push(doc.type);\n        }\n      });\n      formData.append('documentTypes', JSON.stringify(documentTypes));\n      await axios.post('/api/auth/upload-documents', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      toast.success('Documents uploaded successfully! Your account is now under review.');\n\n      // Set submitted state first for immediate UI update\n      setIsSubmitted(true);\n\n      // Refresh user data to get updated status with a small delay\n      setTimeout(async () => {\n        await refreshUser();\n      }, 500);\n    } catch (error) {\n      var _error$response, _error$response$data;\n      toast.error(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'Failed to upload documents');\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  // Check if user already has documents uploaded or if just submitted\n  const getDocumentStatus = () => {\n    var _user$instructorProfi4, _user$instructorProfi5, _user$instructorProfi6;\n    console.log('Checking document status:', {\n      isSubmitted,\n      documentsUploaded: user === null || user === void 0 ? void 0 : (_user$instructorProfi4 = user.instructorProfile) === null || _user$instructorProfi4 === void 0 ? void 0 : _user$instructorProfi4.documentsUploaded,\n      verificationStatus: user === null || user === void 0 ? void 0 : (_user$instructorProfi5 = user.instructorProfile) === null || _user$instructorProfi5 === void 0 ? void 0 : _user$instructorProfi5.verificationStatus,\n      user: user === null || user === void 0 ? void 0 : user.instructorProfile\n    });\n\n    // If just submitted in this session, show under_review\n    if (isSubmitted) {\n      return 'under_review';\n    }\n\n    // If user has previously uploaded documents, check their status\n    if (user !== null && user !== void 0 && (_user$instructorProfi6 = user.instructorProfile) !== null && _user$instructorProfi6 !== void 0 && _user$instructorProfi6.documentsUploaded) {\n      return user.instructorProfile.verificationStatus || 'under_review';\n    }\n    return null;\n  };\n\n  // Get rejection reasons from documents or verification comments\n  const getRejectionReasons = () => {\n    var _user$instructorProfi7, _user$instructorProfi8;\n    const reasons = [];\n\n    // Check individual document comments\n    if (user !== null && user !== void 0 && (_user$instructorProfi7 = user.instructorProfile) !== null && _user$instructorProfi7 !== void 0 && _user$instructorProfi7.documents) {\n      user.instructorProfile.documents.forEach(doc => {\n        if (!doc.verified && doc.comments) {\n          reasons.push(`${getDocumentTypeLabel(doc.type)}: ${doc.comments}`);\n        }\n      });\n    }\n\n    // Check overall verification comments\n    if (user !== null && user !== void 0 && (_user$instructorProfi8 = user.instructorProfile) !== null && _user$instructorProfi8 !== void 0 && _user$instructorProfi8.verificationComments) {\n      reasons.push(user.instructorProfile.verificationComments);\n    }\n    return reasons;\n  };\n  const getDocumentTypeLabel = type => {\n    const labels = {\n      degree_certificate: 'Degree Certificate',\n      teaching_certificate: 'Teaching Certificate',\n      id_proof: 'ID Proof',\n      experience_letter: 'Experience Letter',\n      other: 'Other Document'\n    };\n    return labels[type] || type;\n  };\n\n  // Reset documents for reupload\n  const handleReupload = async () => {\n    try {\n      setUploading(true);\n\n      // Call backend to reset document status\n      await axios.put('/api/users/reset-documents');\n\n      // Reset local state\n      setIsSubmitted(false);\n      setDocuments([{\n        type: 'degree_certificate',\n        file: null,\n        required: true,\n        label: 'Degree Certificate'\n      }, {\n        type: 'teaching_certificate',\n        file: null,\n        required: false,\n        label: 'Teaching Certificate'\n      }, {\n        type: 'id_proof',\n        file: null,\n        required: true,\n        label: 'ID Proof'\n      }, {\n        type: 'experience_letter',\n        file: null,\n        required: false,\n        label: 'Experience Letter'\n      }]);\n\n      // Refresh user data\n      await refreshUser();\n      toast.success('Ready for new document upload. Please select your documents.');\n    } catch (error) {\n      console.error('Error resetting documents:', error);\n      toast.error('Failed to reset document status. Please try again.');\n    } finally {\n      setUploading(false);\n    }\n  };\n  const documentStatus = getDocumentStatus();\n  const renderStatusScreen = () => {\n    let statusIcon, statusTitle, statusMessage, statusColor;\n    const rejectionReasons = getRejectionReasons();\n    switch (documentStatus) {\n      case 'approved':\n        statusIcon = /*#__PURE__*/_jsxDEV(CheckCircleIcon, {\n          className: \"h-16 w-16 text-green-500 mx-auto\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 22\n        }, this);\n        statusTitle = 'Documents Approved';\n        statusMessage = 'Congratulations! Your documents have been verified and your instructor account is now active.';\n        statusColor = 'text-green-600';\n        break;\n      case 'rejected':\n        statusIcon = /*#__PURE__*/_jsxDEV(XCircleIcon, {\n          className: \"h-16 w-16 text-red-500 mx-auto\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 22\n        }, this);\n        statusTitle = 'Documents Rejected';\n        statusMessage = 'Your documents were rejected. Please review the reasons below and upload new documents.';\n        statusColor = 'text-red-600';\n        break;\n      default:\n        // under_review or pending\n        statusIcon = /*#__PURE__*/_jsxDEV(ClockIcon, {\n          className: \"h-16 w-16 text-yellow-500 mx-auto\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 22\n        }, this);\n        statusTitle = 'Documents Under Review';\n        statusMessage = 'Your documents have been submitted and are currently being reviewed by our admin team. You will be notified once the review is complete.';\n        statusColor = 'text-yellow-600';\n    }\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sm:mx-auto sm:w-full sm:max-w-md\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white py-8 px-6 shadow-xl rounded-lg text-center\",\n          children: [statusIcon, /*#__PURE__*/_jsxDEV(\"h2\", {\n            className: `mt-4 text-2xl font-bold ${statusColor}`,\n            children: statusTitle\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mt-4 text-gray-600\",\n            children: statusMessage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 13\n          }, this), documentStatus === 'rejected' && rejectionReasons.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-6 text-left\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-sm font-medium text-gray-900 mb-3\",\n              children: \"Rejection Reasons:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-red-50 border border-red-200 rounded-md p-4\",\n              children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                className: \"text-sm text-red-800 space-y-2\",\n                children: rejectionReasons.map((reason, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n                  className: \"flex items-start\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"inline-block w-2 h-2 bg-red-500 rounded-full mt-2 mr-3 flex-shrink-0\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 212,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: reason\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 213,\n                    columnNumber: 25\n                  }, this)]\n                }, index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 211,\n                  columnNumber: 23\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 209,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-8 space-y-4\",\n            children: [documentStatus === 'rejected' && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleReupload,\n              disabled: uploading,\n              className: \"w-full btn btn-primary disabled:opacity-50\",\n              children: uploading ? 'Resetting...' : 'Reupload Documents'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => navigate('/dashboard'),\n              className: \"w-full btn btn-secondary\",\n              children: \"Go to Dashboard\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 7\n    }, this);\n  };\n\n  // Show status screen if documents are submitted or already uploaded\n  if (documentStatus) {\n    return renderStatusScreen();\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sm:mx-auto sm:w-full sm:max-w-2xl\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white py-8 px-6 shadow-xl rounded-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-2xl font-bold text-gray-900 text-center\",\n            children: \"Upload Verification Documents\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mt-2 text-sm text-gray-600 text-center\",\n            children: \"Please upload the required documents for account verification\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          className: \"space-y-6\",\n          children: [documents.map((doc, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"border rounded-lg p-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700\",\n                children: [doc.label, doc.required && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-red-500 ml-1\",\n                  children: \"*\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 268,\n                  columnNumber: 38\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 266,\n                columnNumber: 19\n              }, this), doc.file && /*#__PURE__*/_jsxDEV(CheckCircleIcon, {\n                className: \"h-5 w-5 text-green-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 271,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 265,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"border-2 border-dashed border-gray-300 rounded-lg p-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"file\",\n                accept: \".pdf,.jpg,.jpeg,.png,.doc,.docx\",\n                onChange: e => handleFileChange(index, e.target.files[0]),\n                className: \"hidden\",\n                id: `file-${index}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 276,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: `file-${index}`,\n                className: \"cursor-pointer flex flex-col items-center\",\n                children: doc.file ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center\",\n                  children: [/*#__PURE__*/_jsxDEV(DocumentIcon, {\n                    className: \"h-8 w-8 text-blue-500 mr-2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 289,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-sm text-gray-700\",\n                    children: doc.file.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 290,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 288,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(CloudArrowUpIcon, {\n                    className: \"h-8 w-8 text-gray-400 mb-2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 294,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-sm text-gray-600\",\n                    children: [\"Click to upload \", doc.label.toLowerCase()]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 295,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-xs text-gray-500 mt-1\",\n                    children: \"PDF, JPG, PNG, DOC (max 10MB)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 298,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 283,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 17\n            }, this)]\n          }, doc.type, true, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 15\n          }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-blue-50 border border-blue-200 rounded-md p-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"text-sm font-medium text-blue-900 mb-2\",\n              children: \"Document Guidelines:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 309,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"text-sm text-blue-800 space-y-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                children: \"\\u2022 Documents should be clear and legible\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 311,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: \"\\u2022 Maximum file size: 10MB per document\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 312,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: \"\\u2022 Accepted formats: PDF, JPG, PNG, DOC, DOCX\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 313,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: \"\\u2022 All information should be clearly visible\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 314,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 310,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: () => navigate('/dashboard'),\n              className: \"btn btn-secondary\",\n              children: \"Skip for Now\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 319,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              disabled: uploading,\n              className: \"btn btn-primary disabled:opacity-50\",\n              children: uploading ? 'Uploading...' : 'Upload Documents'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 326,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 250,\n    columnNumber: 5\n  }, this);\n};\n_s(DocumentUpload, \"X3uAUKTY1Sx6NPsB5iXT4qCZKZc=\", false, function () {\n  return [useNavigate, useAuth];\n});\n_c = DocumentUpload;\nexport default DocumentUpload;\nvar _c;\n$RefreshReg$(_c, \"DocumentUpload\");","map":{"version":3,"names":["useState","useEffect","useNavigate","axios","CloudArrowUpIcon","DocumentIcon","CheckCircleIcon","ClockIcon","XCircleIcon","toast","useAuth","jsxDEV","_jsxDEV","Fragment","_Fragment","DocumentUpload","_s","_user$instructorProfi3","navigate","user","refreshUser","uploading","setUploading","isSubmitted","setIsSubmitted","documents","setDocuments","type","file","required","label","_user$instructorProfi","_user$instructorProfi2","instructorProfile","verificationStatus","error","success","handleFileChange","index","updatedDocuments","handleSubmit","e","preventDefault","requiredDocs","filter","doc","length","formData","FormData","documentTypes","forEach","append","push","JSON","stringify","post","headers","setTimeout","_error$response","_error$response$data","response","data","message","getDocumentStatus","_user$instructorProfi4","_user$instructorProfi5","_user$instructorProfi6","console","log","documentsUploaded","getRejectionReasons","_user$instructorProfi7","_user$instructorProfi8","reasons","verified","comments","getDocumentTypeLabel","verificationComments","labels","degree_certificate","teaching_certificate","id_proof","experience_letter","other","handleReupload","put","documentStatus","renderStatusScreen","statusIcon","statusTitle","statusMessage","statusColor","rejectionReasons","className","fileName","_jsxFileName","lineNumber","columnNumber","children","map","reason","onClick","disabled","onSubmit","accept","onChange","target","files","id","htmlFor","name","toLowerCase","_c","$RefreshReg$"],"sources":["C:/Users/Alikhan/Desktop/TeachI MVP/TeachI/frontend/src/components/Auth/DocumentUpload.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { CloudArrowUpIcon, DocumentIcon, CheckCircleIcon, ClockIcon, XCircleIcon } from '@heroicons/react/24/outline';\nimport toast from 'react-hot-toast';\nimport { useAuth } from '../../context/AuthContext';\n\nconst DocumentUpload = () => {\n  const navigate = useNavigate();\n  const { user, refreshUser } = useAuth();\n  const [uploading, setUploading] = useState(false);\n  const [isSubmitted, setIsSubmitted] = useState(false);\n  const [documents, setDocuments] = useState([\n    { type: 'degree_certificate', file: null, required: true, label: 'Degree Certificate' },\n    { type: 'teaching_certificate', file: null, required: false, label: 'Teaching Certificate' },\n    { type: 'id_proof', file: null, required: true, label: 'ID Proof' },\n    { type: 'experience_letter', file: null, required: false, label: 'Experience Letter' }\n  ]);\n\n  // Show toast notification for document status changes\n  useEffect(() => {\n    if (user?.instructorProfile?.verificationStatus === 'rejected' && !isSubmitted) {\n      toast.error('Your documents were rejected. Please upload new documents for verification.');\n    } else if (user?.instructorProfile?.verificationStatus === 'approved') {\n      toast.success('Your documents have been approved! Your instructor account is now active.');\n    }\n  }, [user?.instructorProfile?.verificationStatus, isSubmitted]);\n\n  const handleFileChange = (index, file) => {\n    const updatedDocuments = [...documents];\n    updatedDocuments[index].file = file;\n    setDocuments(updatedDocuments);\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    // Check required documents\n    const requiredDocs = documents.filter(doc => doc.required && !doc.file);\n    if (requiredDocs.length > 0) {\n      toast.error('Please upload all required documents');\n      return;\n    }\n\n    setUploading(true);\n    \n    try {\n      const formData = new FormData();\n      const documentTypes = [];\n\n      documents.forEach(doc => {\n        if (doc.file) {\n          formData.append('documents', doc.file);\n          documentTypes.push(doc.type);\n        }\n      });\n\n      formData.append('documentTypes', JSON.stringify(documentTypes));\n\n      await axios.post('/api/auth/upload-documents', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n\n      toast.success('Documents uploaded successfully! Your account is now under review.');\n      \n      // Set submitted state first for immediate UI update\n      setIsSubmitted(true);\n      \n      // Refresh user data to get updated status with a small delay\n      setTimeout(async () => {\n        await refreshUser();\n      }, 500);\n      \n    } catch (error) {\n      toast.error(error.response?.data?.message || 'Failed to upload documents');\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  // Check if user already has documents uploaded or if just submitted\n  const getDocumentStatus = () => {\n    console.log('Checking document status:', {\n      isSubmitted,\n      documentsUploaded: user?.instructorProfile?.documentsUploaded,\n      verificationStatus: user?.instructorProfile?.verificationStatus,\n      user: user?.instructorProfile\n    });\n    \n    // If just submitted in this session, show under_review\n    if (isSubmitted) {\n      return 'under_review';\n    }\n    \n    // If user has previously uploaded documents, check their status\n    if (user?.instructorProfile?.documentsUploaded) {\n      return user.instructorProfile.verificationStatus || 'under_review';\n    }\n    \n    return null;\n  };\n\n  // Get rejection reasons from documents or verification comments\n  const getRejectionReasons = () => {\n    const reasons = [];\n    \n    // Check individual document comments\n    if (user?.instructorProfile?.documents) {\n      user.instructorProfile.documents.forEach(doc => {\n        if (!doc.verified && doc.comments) {\n          reasons.push(`${getDocumentTypeLabel(doc.type)}: ${doc.comments}`);\n        }\n      });\n    }\n    \n    // Check overall verification comments\n    if (user?.instructorProfile?.verificationComments) {\n      reasons.push(user.instructorProfile.verificationComments);\n    }\n    \n    return reasons;\n  };\n\n  const getDocumentTypeLabel = (type) => {\n    const labels = {\n      degree_certificate: 'Degree Certificate',\n      teaching_certificate: 'Teaching Certificate',\n      id_proof: 'ID Proof',\n      experience_letter: 'Experience Letter',\n      other: 'Other Document'\n    };\n    return labels[type] || type;\n  };\n\n  // Reset documents for reupload\n  const handleReupload = async () => {\n    try {\n      setUploading(true);\n      \n      // Call backend to reset document status\n      await axios.put('/api/users/reset-documents');\n      \n      // Reset local state\n      setIsSubmitted(false);\n      setDocuments([\n        { type: 'degree_certificate', file: null, required: true, label: 'Degree Certificate' },\n        { type: 'teaching_certificate', file: null, required: false, label: 'Teaching Certificate' },\n        { type: 'id_proof', file: null, required: true, label: 'ID Proof' },\n        { type: 'experience_letter', file: null, required: false, label: 'Experience Letter' }\n      ]);\n      \n      // Refresh user data\n      await refreshUser();\n      \n      toast.success('Ready for new document upload. Please select your documents.');\n    } catch (error) {\n      console.error('Error resetting documents:', error);\n      toast.error('Failed to reset document status. Please try again.');\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  const documentStatus = getDocumentStatus();\n\n  const renderStatusScreen = () => {\n    let statusIcon, statusTitle, statusMessage, statusColor;\n    const rejectionReasons = getRejectionReasons();\n\n    switch (documentStatus) {\n      case 'approved':\n        statusIcon = <CheckCircleIcon className=\"h-16 w-16 text-green-500 mx-auto\" />;\n        statusTitle = 'Documents Approved';\n        statusMessage = 'Congratulations! Your documents have been verified and your instructor account is now active.';\n        statusColor = 'text-green-600';\n        break;\n      case 'rejected':\n        statusIcon = <XCircleIcon className=\"h-16 w-16 text-red-500 mx-auto\" />;\n        statusTitle = 'Documents Rejected';\n        statusMessage = 'Your documents were rejected. Please review the reasons below and upload new documents.';\n        statusColor = 'text-red-600';\n        break;\n      default: // under_review or pending\n        statusIcon = <ClockIcon className=\"h-16 w-16 text-yellow-500 mx-auto\" />;\n        statusTitle = 'Documents Under Review';\n        statusMessage = 'Your documents have been submitted and are currently being reviewed by our admin team. You will be notified once the review is complete.';\n        statusColor = 'text-yellow-600';\n    }\n\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8\">\n        <div className=\"sm:mx-auto sm:w-full sm:max-w-md\">\n          <div className=\"bg-white py-8 px-6 shadow-xl rounded-lg text-center\">\n            {statusIcon}\n            <h2 className={`mt-4 text-2xl font-bold ${statusColor}`}>\n              {statusTitle}\n            </h2>\n            <p className=\"mt-4 text-gray-600\">\n              {statusMessage}\n            </p>\n            \n            {/* Show rejection reasons */}\n            {documentStatus === 'rejected' && rejectionReasons.length > 0 && (\n              <div className=\"mt-6 text-left\">\n                <h3 className=\"text-sm font-medium text-gray-900 mb-3\">Rejection Reasons:</h3>\n                <div className=\"bg-red-50 border border-red-200 rounded-md p-4\">\n                  <ul className=\"text-sm text-red-800 space-y-2\">\n                    {rejectionReasons.map((reason, index) => (\n                      <li key={index} className=\"flex items-start\">\n                        <span className=\"inline-block w-2 h-2 bg-red-500 rounded-full mt-2 mr-3 flex-shrink-0\"></span>\n                        <span>{reason}</span>\n                      </li>\n                    ))}\n                  </ul>\n                </div>\n              </div>\n            )}\n            \n            <div className=\"mt-8 space-y-4\">\n              {documentStatus === 'rejected' && (\n                <button\n                  onClick={handleReupload}\n                  disabled={uploading}\n                  className=\"w-full btn btn-primary disabled:opacity-50\"\n                >\n                  {uploading ? 'Resetting...' : 'Reupload Documents'}\n                </button>\n              )}\n              <button\n                onClick={() => navigate('/dashboard')}\n                className=\"w-full btn btn-secondary\"\n              >\n                Go to Dashboard\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  // Show status screen if documents are submitted or already uploaded\n  if (documentStatus) {\n    return renderStatusScreen();\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8\">\n      <div className=\"sm:mx-auto sm:w-full sm:max-w-2xl\">\n        <div className=\"bg-white py-8 px-6 shadow-xl rounded-lg\">\n          <div className=\"mb-8\">\n            <h2 className=\"text-2xl font-bold text-gray-900 text-center\">\n              Upload Verification Documents\n            </h2>\n            <p className=\"mt-2 text-sm text-gray-600 text-center\">\n              Please upload the required documents for account verification\n            </p>\n          </div>\n\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            {documents.map((doc, index) => (\n              <div key={doc.type} className=\"border rounded-lg p-4\">\n                <div className=\"flex items-center justify-between mb-3\">\n                  <label className=\"block text-sm font-medium text-gray-700\">\n                    {doc.label}\n                    {doc.required && <span className=\"text-red-500 ml-1\">*</span>}\n                  </label>\n                  {doc.file && (\n                    <CheckCircleIcon className=\"h-5 w-5 text-green-500\" />\n                  )}\n                </div>\n                \n                <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-4\">\n                  <input\n                    type=\"file\"\n                    accept=\".pdf,.jpg,.jpeg,.png,.doc,.docx\"\n                    onChange={(e) => handleFileChange(index, e.target.files[0])}\n                    className=\"hidden\"\n                    id={`file-${index}`}\n                  />\n                  <label\n                    htmlFor={`file-${index}`}\n                    className=\"cursor-pointer flex flex-col items-center\"\n                  >\n                    {doc.file ? (\n                      <div className=\"flex items-center\">\n                        <DocumentIcon className=\"h-8 w-8 text-blue-500 mr-2\" />\n                        <span className=\"text-sm text-gray-700\">{doc.file.name}</span>\n                      </div>\n                    ) : (\n                      <>\n                        <CloudArrowUpIcon className=\"h-8 w-8 text-gray-400 mb-2\" />\n                        <span className=\"text-sm text-gray-600\">\n                          Click to upload {doc.label.toLowerCase()}\n                        </span>\n                        <span className=\"text-xs text-gray-500 mt-1\">\n                          PDF, JPG, PNG, DOC (max 10MB)\n                        </span>\n                      </>\n                    )}\n                  </label>\n                </div>\n              </div>\n            ))}\n\n            <div className=\"bg-blue-50 border border-blue-200 rounded-md p-4\">\n              <h4 className=\"text-sm font-medium text-blue-900 mb-2\">Document Guidelines:</h4>\n              <ul className=\"text-sm text-blue-800 space-y-1\">\n                <li>• Documents should be clear and legible</li>\n                <li>• Maximum file size: 10MB per document</li>\n                <li>• Accepted formats: PDF, JPG, PNG, DOC, DOCX</li>\n                <li>• All information should be clearly visible</li>\n              </ul>\n            </div>\n\n            <div className=\"flex justify-between\">\n              <button\n                type=\"button\"\n                onClick={() => navigate('/dashboard')}\n                className=\"btn btn-secondary\"\n              >\n                Skip for Now\n              </button>\n              <button\n                type=\"submit\"\n                disabled={uploading}\n                className=\"btn btn-primary disabled:opacity-50\"\n              >\n                {uploading ? 'Uploading...' : 'Upload Documents'}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default DocumentUpload;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}